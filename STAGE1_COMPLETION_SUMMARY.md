# Stage 1 Completion Summary ‚Äî DzydoClub

## üéØ –¶–µ–ª—å
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —è–¥—Ä–æ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª—É–±–∞–º–∏ –¥–∑—é–¥–æ, –≤–∫–ª—é—á–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, CRUD —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã.

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (6 —Ñ–µ–≤—Ä–∞–ª—è 2026)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Express.js** –±—ç–∫–µ–Ω–¥ —Å TypeScript
- **PostgreSQL** —Å –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ schema'—ã
- **Prisma ORM** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è migration–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø–æ–º
- **JWT authentication** —Å access/refresh —Ç–æ–∫–µ–Ω–∞–º–∏
- **RBAC** —Å 6 —Ä–æ–ª—è–º–∏: SUPERADMIN, ADMIN, COACH, JUDGE, ATHLETE, PARENT
- **Docker Compose** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **GitHub Actions** CI/CD —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

#### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`src/routes/auth.ts`, `src/middleware/auth.ts`)
```
POST /auth/login           ‚Üí access + refresh —Ç–æ–∫–µ–Ω—ã
POST /auth/refresh         ‚Üí –Ω–æ–≤—ã–π access —Ç–æ–∫–µ–Ω
POST /auth/logout          ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å refresh token
```

#### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (`src/routes/users.ts`, `src/services/invite.ts`)
```
POST /users/invite         ‚Üí —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ (superadmin/admin)
POST /users/accept         ‚Üí –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω—É
GET  /users                ‚Üí —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (admin only)
```

#### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—É–±–∞–º–∏ (`src/routes/clubs.ts`)
```
POST /clubs                ‚Üí —Å–æ–∑–¥–∞—Ç—å –∫–ª—É–± + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π provisioning tenant schema
```

#### 4. –°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã (`src/routes/athletes.ts`)
```
GET    /athletes           ‚Üí —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ –≤ –∫–ª—É–±–µ
POST   /athletes           ‚Üí —Å–æ–∑–¥–∞—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞
GET    /athletes/:id       ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞
PUT    /athletes/:id       ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞
DELETE /athletes/:id       ‚Üí —É–¥–∞–ª–∏—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞
```

#### 5. –ì—Ä—É–ø–ø—ã/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`src/routes/groups.ts`)
```
GET    /groups             ‚Üí —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
POST   /groups             ‚Üí —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
GET    /groups/:id         ‚Üí –ø–æ–ª—É—á–∏—Ç—å –≥—Ä—É–ø–ø—É
PUT    /groups/:id         ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É
DELETE /groups/:id         ‚Üí —É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É
```

#### 6. –¢—É—Ä–Ω–∏—Ä—ã (`src/routes/tournaments.ts`)
```
GET    /tournaments        ‚Üí –≤—Å–µ —Ç—É—Ä–Ω–∏—Ä—ã
POST   /tournaments        ‚Üí —Å–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä
GET    /tournaments/:id    ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
PUT    /tournaments/:id    ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
DELETE /tournaments/:id    ‚Üí —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä
```

#### 7. –ú–∞—Ç—á–∏ –∏ —Å–µ—Ç–∫–∏ (`src/routes/matches.ts`)
```
POST   /matches/generate/:tournamentId  ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ª–∏–º–ø–∏–π—Å–∫—É—é —Å–µ—Ç–∫—É
GET    /matches/tournament/:tournamentId ‚Üí –ø–æ–ª—É—á–∏—Ç—å –º–∞—Ç—á–∏ —Ç—É—Ä–Ω–∏—Ä–∞
POST   /matches/:matchId/result         ‚Üí –≤–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–æ–≤—ã—Å–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### Public schema (–æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫–ª—É–±–æ–≤)
- `clubs` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª—É–±–∞—Ö
- `users` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å—É–ø–µ—Ä–∞–¥–º–∏–Ω—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
- `refresh_tokens` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- `invitations` ‚Äî –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏

#### Tenant schema (–æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—É–±–∞)
- `athletes` ‚Äî —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã —Å –±–∏–æ–º–µ—Ç—Ä–∏–µ–π
- `groups` ‚Äî –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `tournaments` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—É—Ä–Ω–∏—Ä–∞—Ö
- `matches` ‚Äî –º–∞—Ç—á–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –ª–æ–≥–∏–∫–∞ —Å–µ—Ç–∫–∏

### –¢–µ—Å—Ç—ã

#### `tests/matches.test.ts`
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—É–±–∞ –∏ tenant schema
- –í—Å—Ç–∞–≤–∫–∞ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ª–∏–º–ø–∏–π—Å–∫–æ–π —Å–µ—Ç–∫–∏
- –í–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –∞–≤—Ç–æ–ø—Ä–æ–º–æ—Ü–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥

#### `tests/users.invite.test.ts`
- –°–æ–∑–¥–∞–Ω–∏–µ superadmin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- –ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é

#### `tests/tenant_isolation.test.ts`
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤—É—Ö –∫–ª—É–±–æ–≤ –ê –∏ –ë
- –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–Ω—ã–µ schema'—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (–Ω–µ –≤–∏–¥–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥—É)

### –ú–∏–≥—Ä–∞—Ü–∏–∏

#### `prisma/migrations/0001_init/migration.sql`
–°–æ–∑–¥–∞—ë—Ç public schema:
- clubs, users, refresh_tokens —Ç–∞–±–ª–∏—Ü—ã
- role enum —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ä–æ–ª–µ–π

#### `prisma/migrations/0002_invitations/migration.sql`
–°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É invitations –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

#### `prisma/tenant_schema.sql`
Template –¥–ª—è tenant schema'—ã:
- athletes, groups, tournaments, matches —Ç–∞–±–ª–∏—Ü—ã
- –∏–Ω–¥–µ–∫—Å—ã –∏ foreign keys

### npm –°–∫—Ä–∏–ø—Ç—ã

```bash
npm run build              # TypeScript ‚Üí JS (dist/)
npm run dev                # –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞ —Å auto-restart
npm run test               # –ó–∞–ø—É—Å–∫ Jest —Ç–µ—Å—Ç–æ–≤
npm run start              # –ó–∞–ø—É—Å–∫ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
npm run lint               # ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run prisma:generate    # Generate Prisma client
npm run db:init            # –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞—Å—Ç public tables)
npm run db:reset           # –°–±—Ä–æ—Å –ë–î (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
npm run db:migrate         # –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run db:push            # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å schema —Å –ë–î
npm run db:seed            # Seed superadmin –∏ default club
npm run setup              # Convenience: generate ‚Üí init ‚Üí seed
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- **SETUP_LOCAL_TESTING.md** ‚Äî 200+ —Å—Ç—Ä–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
  - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (Node.js, npm, Postgres/Docker)
  - –ü–æ—à–∞–≥–æ–≤–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ dev —Å–µ—Ä–≤–µ—Ä–∞
  - API –ø—Ä–∏–º–µ—Ä—ã —Å curl
  - –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

- **PR_INSTRUCTIONS.md** ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –í–∞—Ä–∏–∞–Ω—Ç —Å –æ–¥–Ω–∏–º –±–æ–ª—å—à–∏–º –∫–æ–º–º–∏—Ç–æ–º
  - –í–∞—Ä–∏–∞–Ω—Ç —Å –º–µ–ª–∫–∏–º–∏ –∫–æ–º–º–∏—Ç–∞–º–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è review)
  - Template –æ–ø–∏—Å–∞–Ω–∏—è PR

- **PR_RBAC_Users_Isolation.md** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ PR
  - –¶–µ–ª–∏ –∏ –æ–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  - –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è review

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **README.md** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- **DEVELOPMENT_STEPS.md** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å Stage 1 ‚úÖ
- **ISSUES_STAGE1.md** ‚Äî –æ—Ç–º–µ—á–µ–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
- **.env.example** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è dev –∏ —Ç–µ—Å—Ç–æ–≤
- **package.json** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã npm —Å–∫—Ä–∏–ø—Ç—ã
- **jest.config.cjs** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Jest
- **docker-compose.yml** ‚Äî Postgres —Å–µ—Ä–≤–∏—Å
- **.github/workflows/ci.yml** ‚Äî GitHub Actions workflow

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –ü–æ–¥–Ω—è—Ç—å Postgres
docker-compose up -d

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
npm install
npm run setup
npm test
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
npm run dev
# –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ http://localhost:3000
```

### –ü—Ä–∏–º–µ—Ä API —Å–µ—Å—Å–∏–∏
```bash
# 1. –õ–æ–≥–∏–Ω
curl -X POST http://localhost:3000/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@dzydo.local","password":"changeme"}'

# –ü–æ–ª—É—á–∏—Ç–µ: {"access":"...", "refresh":"..."}

# 2. –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ access —Ç–æ–∫–µ–Ω)
curl -X POST http://localhost:3000/users/invite \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"email":"coach@club.local","role":"COACH"}'

# –ü–æ–ª—É—á–∏—Ç–µ: {"token":"...", "expiresAt":"..."}

# 3. –ü—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
curl -X POST http://localhost:3000/users/accept \
  -H "Content-Type: application/json" \
  -d '{"token":"...","password":"coachpass","name":"John Coach"}'
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|---------|
| –§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ/–∏–∑–º–µ–Ω–µ–Ω–æ | ~30 |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (backend) | ~2500 |
| –¢–µ—Å—Ç–æ–≤ (integration) | 3 |
| API endpoints | 20+ |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | 2 |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞, 1000+ —Å—Ç—Ä–æ–∫ |

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
- –ö–∞–∂–¥—ã–π –∫–ª—É–± –ø–æ–ª—É—á–∞–µ—Ç **–æ—Ç–¥–µ–ª—å–Ω—É—é PostgreSQL schema**
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–µ—Å—Ç—ã —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç)
- Middleware –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç schema –ø–æ `X-Club-Id` header
- –ú–∏–Ω–∏-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è tenant schema –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª—É–±–∞

### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø—É–±–ª–∏—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- –¢–æ–∫–µ–Ω –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤—É–µ—Ç 7 –¥–Ω–µ–π
- –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ì–æ—Ç–æ–≤–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å email –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- Suuperadmin –∏ default club —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- Seed –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω (–±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è Prisma
- CI –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω

### 4. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- Raw SQL queries —á–µ—Ä–µ–∑ Prisma –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- Search path –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ tenant schema
- –ì–æ—Ç–æ–≤–æ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è bcrypt
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã
- ‚úÖ RBAC –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞—â–∏—â—ë–Ω–Ω–æ–º endpoint
- ‚úÖ Refresh token –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞ (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—É–±–ª–∏—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üéì Learning resources

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
src/
‚îú‚îÄ‚îÄ middleware/auth.ts         ‚Äî JWT –∏ RBAC –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ services/invite.ts         ‚Äî —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
‚îú‚îÄ‚îÄ routes/                    ‚Äî –≤—Å–µ API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts               ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ users.ts              ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ clubs.ts              ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—É–±–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ [autres].ts           ‚Äî CRUD –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ tenant.ts                  ‚Äî –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
‚îú‚îÄ‚îÄ app.ts                     ‚Äî Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ index.ts                   ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

prisma/
‚îú‚îÄ‚îÄ schema.prisma              ‚Äî Prisma ORM —Å—Ö–µ–º–∞
‚îú‚îÄ‚îÄ migrations/                ‚Äî –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ tenant_schema.sql          ‚Äî template –¥–ª—è tenant schemas

tests/
‚îú‚îÄ‚îÄ matches.test.ts            ‚Äî —Ç—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ users.invite.test.ts       ‚Äî –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
‚îî‚îÄ‚îÄ tenant_isolation.test.ts   ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏
```

## üìù –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã

**Stage 2: –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç** (–Ω–∞—á–∞—Ç—å –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è Stage 1)
- –ü–ª–∞—Ç–µ–∂–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è, —Å—Ç–∞—Ç—É—Å—ã, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
- –í—ã–ø–ª–∞—Ç—ã —Ç—Ä–µ–Ω–µ—Ä–∞–º (–ø—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å—á–µ—Ç–∞, –≤–µ–¥–æ–º–æ—Å—Ç–∏)
- –î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç (–∑–∞–≥—Ä—É–∑–∫–∞, –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å, —Å—Ä–æ–∫–∏)
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–°—Ä–æ–∫–∏: ~3 –Ω–µ–¥–µ–ª–∏ (–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –ø–ª–∞–Ω–æ–º)

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ (–≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ)

- ‚úÖ –í—Å–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å RBAC –±–µ–∑ –ø—É–±–ª–∏—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏ –≤ CI
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ seed –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è
- ‚úÖ CI/CD –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ö–æ–¥ —á–∏—Å—Ç—ã–π –∏ –≥–æ—Ç–æ–≤ –∫ production

---

**Stage 1 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!** üéâ

–ì–æ—Ç–æ–≤–æ –∫:
- –°–ª–∏—è–Ω–∏—é PR –≤ master
- –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ staging
- –ù–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Stage 2

–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 6 —Ñ–µ–≤—Ä–∞–ª—è 2026
